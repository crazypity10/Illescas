<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculadora de Presupuesto - Illescas Construcciones</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <style>
    body { font-family: Arial, sans-serif; background:#f4f4f4; margin:0; padding:0; }
    header { background:#2c3e50; color:#fff; padding:15px; text-align:center; }
    .container { max-width:900px; margin:auto; padding:20px; }
    h1 { color:#2c3e50; text-align:center; }
    .calculadora, .carrito { background:#fff; padding:20px; border-radius:10px; box-shadow:0 4px 12px rgba(0,0,0,0.1); margin-bottom:20px; }
    label { font-weight:bold; display:block; margin-top:10px; }
    select, input { width:100%; padding:10px; margin-top:5px; border:1px solid #ccc; border-radius:5px; }
    button { margin-top:15px; width:100%; background:#e67e22; border:none; color:#fff; padding:12px; font-size:16px; border-radius:5px; cursor:pointer; }
    button:hover { background:#d35400; }
    .resultado { margin-top:20px; font-weight:bold; text-align:center; font-size:18px; }
    table { width:100%; border-collapse:collapse; margin-top:10px; }
    th, td { border:1px solid #ccc; padding:10px; text-align:center; }
    th { background:#2c3e50; color:white; }
    .btn-eliminar { background:#dc3545; color:white; border:none; padding:6px 12px; border-radius:5px; cursor:pointer; }
    .btn-eliminar:hover { background:#b52a37; }
    .whatsapp { display:none; margin-top:20px; background:#25D366; color:#fff; text-align:center; padding:12px; border-radius:5px; font-weight:bold; text-decoration:none; }
    .whatsapp:hover { background:#20ba5b; }
    .acciones-extra { margin-top:20px; text-align:center; }
    .acciones-extra button, .acciones-extra a { display:inline-block; margin:5px; padding:12px 20px; border:none; border-radius:5px; font-size:16px; text-decoration:none; cursor:pointer; }
    .btn-vaciar { background:#dc3545; color:white; }
    .btn-vaciar:hover { background:#b52a37; }
    .btn-inicio { background:#007bff; color:white; }
    .btn-inicio:hover { background:#0056b3; }
    .download-btn { display: none; background: #3498db; color: white; margin-top: 10px; }
    .download-btn:hover { background: #2980b9; }
  </style>
</head>
<body>
  <header>
    <h1>Calculadora de Presupuesto</h1>
    <p>Illescas Construcciones - Olavarría</p>
  </header>

  <div class="container">
    <div class="calculadora">
      <label for="trabajo">Tipo de trabajo:</label>
      <select id="trabajo">
        <option value="zapata">Zapatas 1x1 (2 pisos) - $120.000 c/u</option>
        <option value="encadenado">Encadenado lineal - $25.000 ml</option>
        <option value="columnas">Columnas metro lineal - $25.000 ml</option>
        <option value="vigas_sup_armada">Vigas sup. armada lineal - $25.000 ml</option>
        <option value="losa_viguetas">Losa viguetas - $50.000 m²</option>
        <option value="losa_hormigon">Losa hormigón - $80.000 m²</option>
        <option value="capa_aisladora">Capa aisladora - $20.000 ml</option>
        <option value="techo_chapa">Techo chapa c/ machimbre - $50.000 m²</option>
        <option value="pared_comun">Pared ladrillo común - $25.000 m²</option>
        <option value="pared_hueco_12">Ladrillo del 12 - $20.000 m²</option>
        <option value="pared_hueco_8">Ladrillo del 8 - $12.000 m²</option>
        <option value="revoque_fino">Revoque fino - $15.000 m²</option>
        <option value="revoque_grueso">Revoque grueso - $18.000 m²</option>
        <option value="revoque_interior">Revoque interior - $20.000 m²</option>
        <option value="revoque_ext">Revoque ext. (serecita + grueso) - $30.000 m²</option>
        <option value="pintura_latex">Pintura látex - $10.000 m²</option>
        <option value="pintura_sintetico">Pintura esmalte sintético - $12.000 m²</option>
        <option value="enduido">Enduido por mano - $8.000 m²</option>
        <option value="piso_ceramico">Colocación piso cerámico - $20.000 m²</option>
        <option value="piso_pvc">Colocación piso PVC - $15.000 m²</option>
        <option value="revestimiento_plastico">Revestimiento plástico - $18.000 m²</option>
        <option value="cielorraso_yeso">Cielorraso de yeso - $22.000 m²</option>
        <option value="cielorraso_pvc">Cielorraso de PVC - $16.000 m²</option>
        <option value="colocacion_puerta">Colocación Puerta desde - $120.000 c/u</option>
        <option value="puerta_placa">Puerta de placa - $75.000 c/u</option>
        <option value="ventana_desde">Ventanas desde - $60.000 c/u</option>
        <option value="ventana_grande">Ventanas 1.80x2.00 - $150.000 c/u</option>
        <option value="membrana_rollo">Membrana por rollo - $40.000 c/u</option>
        <option value="membrana_liquida">Membrana líquida.o pasta - $12.000 m²</option>
      </select>

      <label for="cantidad">Cantidad:</label>
      <input type="number" id="cantidad" placeholder="Ingrese cantidad" min="1">

      <button onclick="agregarAlCarrito()">Agregar al Presupuesto</button>
    </div>

    <div class="carrito">
      <h2>Tu Presupuesto</h2>
      <table id="tablaCarrito">
        <thead>
          <tr>
            <th>Trabajo</th>
            <th>Cantidad</th>
            <th>Precio unitario</th>
            <th>Subtotal</th>
            <th>Acción</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <div class="resultado" id="total">Total: $0</div>
      <div style="text-align: center;">
        <a id="btnWhatsapp" href="#" target="_blank" class="whatsapp">Enviar por WhatsApp</a>
        <button id="btnDownload" class="download-btn" onclick="descargarPresupuesto()">Descargar Presupuesto</button>
      </div>
      <div class="acciones-extra">
        <button class="btn-vaciar" onclick="vaciarCarrito()">Vaciar Carrito</button>
        <a href="index.html" class="btn-inicio">Volver al Inicio</a>
      </div>
    </div>
  </div>

  <script>
    const precios = {
      zapata: { desc: "Zapatas 1x1 (2 pisos)", precio: 120000 },
      encadenado: { desc: "Encadenado lineal", precio: 25000 },
      columnas: { desc: "Columnas metro lineal", precio: 25000 },
      vigas_sup_armada: { desc: "Vigas sup. armada lineal", precio: 25000 },
      losa_viguetas: { desc: "Losa viguetas", precio: 50000 },
      losa_hormigon: { desc: "Losa hormigón", precio: 80000 },
      capa_aisladora: { desc: "Capa aisladora", precio: 20000 },
      techo_chapa: { desc: "Techo chapa c/ machimbre", precio: 50000 },
      pared_comun: { desc: "Pared ladrillo común", precio: 25000 },
      pared_hueco_12: { desc: "Ladrillo del 12", precio: 20000 },
      pared_hueco_8: { desc: "Ladrillo del 8", precio: 12000 },
      revoque_fino: { desc: "Revoque fino", precio: 15000 },
      revoque_grueso: { desc: "Revoque grueso", precio: 18000 },
      revoque_interior: { desc: "Revoque interior", precio: 20000 },
      revoque_ext: { desc: "Revoque ext. (serecita + grueso)", precio: 30000 },
      pintura_latex: { desc: "Pintura látex", precio: 10000 },
      pintura_sintetico: { desc: "Pintura esmalte sintético", precio: 12000 },
      enduido: { desc: "Enduido por mano", precio: 8000 },
      piso_ceramico: { desc: "Colocación piso cerámico", precio: 20000 },
      piso_pvc: { desc: "Colocación piso PVC", precio: 15000 },
      revestimiento_plastico: { desc: "Revestimiento plástico", precio: 18000 },
      cielorraso_yeso: { desc: "Cielorraso de yeso", precio: 22000 },
      cielorraso_pvc: { desc: "Cielorraso de PVC", precio: 16000 },
      colocacion_puerta: { desc: "Colocación Puerta desde", precio: 120000 },
      puerta_placa: { desc: "Puerta de placa", precio: 75000 },
      ventana_desde: { desc: "Ventanas desde", precio: 60000 },
      ventana_grande: { desc: "Ventanas 1.80x2.00", precio: 150000 },
      membrana_rollo: { desc: "Membrana por rollo", precio: 40000 },
      membrana_liquida: { desc: "Membrana líquida.o pasta", precio: 12000 },
    };

    let carrito = [];

    function agregarAlCarrito() {
      let trabajo = document.getElementById("trabajo").value;
      let cantidad = parseFloat(document.getElementById("cantidad").value);

      if (isNaN(cantidad) || cantidad <= 0) {
        alert("Ingrese una cantidad válida.");
        return;
      }

      let item = precios[trabajo];
      let subtotal = item.precio * cantidad;

      carrito.push({ trabajo: item.desc, cantidad, precio: item.precio, subtotal });
      actualizarCarrito();
    }

    function eliminarItem(index) {
      carrito.splice(index, 1);
      actualizarCarrito();
    }

    function vaciarCarrito() {
      carrito = [];
      actualizarCarrito();
    }

    function actualizarCarrito() {
      let tbody = document.querySelector("#tablaCarrito tbody");
      tbody.innerHTML = "";
      let total = 0;
      let mensajeWhatsapp = "Presupuesto solicitado:\n\n";
      let mensajeDescarga = "--- Presupuesto Illescas Construcciones ---\n\n";

      carrito.forEach((item, index) => {
        total += item.subtotal;
        mensajeWhatsapp += `${item.trabajo} - ${item.cantidad} x $${item.precio.toLocaleString("es-AR")} = $${item.subtotal.toLocaleString("es-AR")}\n`;
        mensajeDescarga += `${item.trabajo} - ${item.cantidad} x $${item.precio.toLocaleString("es-AR")} = $${item.subtotal.toLocaleString("es-AR")}\n`;

        tbody.innerHTML += `<tr>
          <td>${item.trabajo}</td>
          <td>${item.cantidad}</td>
          <td>$${item.precio.toLocaleString("es-AR")}</td>
          <td>$${item.subtotal.toLocaleString("es-AR")}</td>
          <td><button class="btn-eliminar" onclick="eliminarItem(${index})">Eliminar</button></td>
        </tr>`;
      });

      document.getElementById("total").innerHTML = "Total: $" + total.toLocaleString("es-AR");
      
      mensajeWhatsapp += `\nTOTAL: $${total.toLocaleString("es-AR")}`;
      mensajeDescarga += `\nTOTAL: $${total.toLocaleString("es-AR")}\n\n`;
      mensajeDescarga += `--- Datos de Contacto ---\n`;
      mensajeDescarga += `Empresa: Illescas Construcciones\n`;
      mensajeDescarga += `Celular: +54 2284 58-6475\n`;
      mensajeDescarga += `Teléfono: 410995\n`;
      mensajeDescarga += `Localidad: Olavarría\n`;

      let btnWhatsapp = document.getElementById("btnWhatsapp");
      btnWhatsapp.href = "https://wa.me/542284586475?text=" + encodeURIComponent(mensajeWhatsapp);
      
      let btnDownload = document.getElementById("btnDownload");
      btnWhatsapp.style.display = carrito.length > 0 ? "inline-block" : "none";
      btnDownload.style.display = carrito.length > 0 ? "inline-block" : "none";
    }

    function descargarPresupuesto() {
      if (carrito.length === 0) {
        alert("El carrito está vacío. Agregue un artículo para descargar el presupuesto.");
        return;
      }
      
      let total = 0;
      let mensaje = `--- Presupuesto Illescas Construcciones ---\n\n`;
      
      carrito.forEach((item) => {
        total += item.subtotal;
        mensaje += `${item.trabajo} - ${item.cantidad} x $${item.precio.toLocaleString("es-AR")} = $${item.subtotal.toLocaleString("es-AR")}\n`;
      });
      
      mensaje += `\nTOTAL: $${total.toLocaleString("es-AR")}\n\n`;
      mensaje += `--- Datos de Contacto ---\n`;
      mensaje += `Empresa: Illescas Construcciones\n`;
      mensaje += `Celular: +54 2284 58-6475\n`;
      mensaje += `Teléfono: 410995\n`;
      mensaje += `Localidad: Olavarría\n`;

      const blob = new Blob([mensaje], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'presupuesto_illescas.txt';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }
  </script>
</body>
</html>