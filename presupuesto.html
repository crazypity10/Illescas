<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculadora de Presupuesto - Illescas Construcciones</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <style>
    body { font-family: Arial, sans-serif; background:#f4f4f4; margin:0; padding:0; }
    header { background:#2c3e50; color:#fff; padding:15px; text-align:center; }
    .container { max-width:900px; margin:auto; padding:20px; }
    h1 { color:#2c3e50; text-align:center; }
    .calculadora, .carrito { background:#fff; padding:20px; border-radius:10px; box-shadow:0 4px 12px rgba(0,0,0,0.1); margin-bottom:20px; }
    label { font-weight:bold; display:block; margin-top:10px; }
    select, input { width:100%; padding:10px; margin-top:5px; border:1px solid #ccc; border-radius:5px; }
    button { margin-top:15px; width:100%; background:#e67e22; border:none; color:#fff; padding:12px; font-size:16px; border-radius:5px; cursor:pointer; }
    button:hover { background:#d35400; }
    .resultado { margin-top:20px; font-weight:bold; text-align:center; font-size:18px; }
    .carrito h2 { margin-bottom:10px; }
    table { width:100%; border-collapse:collapse; margin-top:10px; }
    th, td { border:1px solid #ccc; padding:10px; text-align:center; }
    th { background:#2c3e50; color:white; }
    .btn-eliminar { background:#dc3545; color:white; border:none; padding:6px 12px; border-radius:5px; cursor:pointer; }
    .btn-eliminar:hover { background:#b52a37; }
    .whatsapp { display:none; margin-top:20px; background:#25D366; color:#fff; text-align:center; padding:12px; border-radius:5px; font-weight:bold; text-decoration:none; }
    .whatsapp:hover { background:#20ba5b; }
  </style>
</head>
<body>
  <header>
    <h1>Calculadora de Presupuesto</h1>
    <p>Illescas Construcciones - Olavarría</p>
  </header>

  <div class="container">

    <!-- CALCULADORA -->
    <div class="calculadora">
      <label for="trabajo">Tipo de trabajo:</label>
      <select id="trabajo">
        <option value="zapata">Zapatas 1x1 (2 pisos) - $120.000 c/u</option>
        <option value="encadenado">Encadenado lineal - $25.000 ml</option>
        <option value="columna">Columnas - $25.000 ml</option>
        <option value="viga">Vigas sup. armada - $25.000 ml</option>
        <option value="losa_vigueta">Losa viguetas - $50.000 m²</option>
        <option value="capa_aisladora">Capa aisladora - $20.000 ml</option>
        <option value="losa_hormigon">Losa hormigón - $80.000 m²</option>
        <option value="techo_chapa">Techo chapa c/ machimbre - $50.000 m²</option>
        <option value="pared_comun">Pared ladrillo común - $25.000 m²</option>
        <option value="ladrillo12">Pared ladrillo del 12 - $20.000 m²</option>
        <option value="ladrillo8">Pared ladrillo del 8 - $12.000 m²</option>
        <option value="revoque_int">Revoque interior - $20.000 m²</option>
        <option value="revoque_ext">Revoque exterior - $30.000 m²</option>
        <option value="coloc_puerta">Colocación de puerta - $120.000 c/u</option>
        <option value="puerta_placa">Puerta de placa - $75.000 c/u</option>
        <option value="ventana_std">Ventanas desde - $60.000 c/u</option>
        <option value="ventana_grande">Ventanas 1.80x2.00 - $150.000 c/u</option>
        <option value="pintura">Pintura látex - $10.000 m²</option>
        <option value="enduido">Enduido por mano - $8.000 m²</option>
        <option value="membrana_rollo">Membrana por rollo - $40.000 c/u</option>
        <option value="membrana_liquida">Membrana líquida/pasta - $12.000 m²</option>
      </select>

      <label for="cantidad">Cantidad (m², ml o unidades):</label>
      <input type="number" id="cantidad" placeholder="Ingrese cantidad" min="1">

      <button onclick="agregarAlCarrito()">Agregar al Presupuesto</button>
    </div>

    <!-- CARRITO -->
    <div class="carrito">
      <h2>Tu Presupuesto</h2>
      <table id="tablaCarrito">
        <thead>
          <tr>
            <th>Trabajo</th>
            <th>Cantidad</th>
            <th>Precio unitario</th>
            <th>Subtotal</th>
            <th>Acción</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <div class="resultado" id="total">Total: $0</div>
      <a id="btnWhatsapp" href="#" target="_blank" class="whatsapp">Enviar Presupuesto por WhatsApp</a>
    </div>
  </div>

  <script>
    const precios = {
      zapata: { desc: "Zapatas", precio: 120000 },
      encadenado: { desc: "Encadenado lineal", precio: 25000 },
      columna: { desc: "Columna", precio: 25000 },
      viga: { desc: "Viga sup. armada", precio: 25000 },
      losa_vigueta: { desc: "Losa viguetas", precio: 50000 },
      capa_aisladora: { desc: "Capa aisladora", precio: 20000 },
      losa_hormigon: { desc: "Losa de hormigón", precio: 80000 },
      techo_chapa: { desc: "Techo chapa c/ machimbre", precio: 50000 },
      pared_comun: { desc: "Pared ladrillo común", precio: 25000 },
      ladrillo12: { desc: "Pared ladrillo del 12", precio: 20000 },
      ladrillo8: { desc: "Pared ladrillo del 8", precio: 12000 },
      revoque_int: { desc: "Revoque interior", precio: 20000 },
      revoque_ext: { desc: "Revoque exterior", precio: 30000 },
      coloc_puerta: { desc: "Colocación de puerta", precio: 120000 },
      puerta_placa: { desc: "Puerta de placa", precio: 75000 },
      ventana_std: { desc: "Ventana estándar", precio: 60000 },
      ventana_grande: { desc: "Ventana 1.80x2.00", precio: 150000 },
      pintura: { desc: "Pintura látex", precio: 10000 },
      enduido: { desc: "Enduido", precio: 8000 },
      membrana_rollo: { desc: "Membrana por rollo", precio: 40000 },
      membrana_liquida: { desc: "Membrana líquida/pasta", precio: 12000 },
    };

    let carrito = [];

    function agregarAlCarrito() {
      let trabajo = document.getElementById("trabajo").value;
      let cantidad = parseFloat(document.getElementById("cantidad").value);

      if (isNaN(cantidad) || cantidad <= 0) {
        alert("Ingrese una cantidad válida.");
        return;
      }

      let item = precios[trabajo];
      let subtotal = item.precio * cantidad;

      carrito.push({ trabajo: item.desc, cantidad, precio: item.precio, subtotal });
      actualizarCarrito();
    }

    function eliminarItem(index) {
      carrito.splice(index, 1);
      actualizarCarrito();
    }

    function actualizarCarrito() {
      let tbody = document.querySelector("#tablaCarrito tbody");
      tbody.innerHTML = "";
      let total = 0;
      let mensaje = "Presupuesto solicitado:\n\n";

      carrito.forEach((item, index) => {
        total += item.subtotal;
        mensaje += `${item.trabajo} - ${item.cantidad} x $${item.precio.toLocaleString("es-AR")} = $${item.subtotal.toLocaleString("es-AR")}\n`;

        let fila = `<tr>
          <td>${item.trabajo}</td>
          <td>${item.cantidad}</td>
          <td>$${item.precio.toLocaleString("es-AR")}</td>
          <td>$${item.subtotal.toLocaleString("es-AR")}</td>
          <td><button class="btn-eliminar" onclick="eliminarItem(${index})">Eliminar</button></td>
        </tr>`;
        tbody.innerHTML += fila;
      });

      document.getElementById("total").innerHTML = "Total: $" + total.toLocaleString("es-AR");
      mensaje += `\nTOTAL: $${total.toLocaleString("es-AR")}`;

      let btn = document.getElementById("btnWhatsapp");
      btn.href = "https://wa.me/542284586475?text=" + encodeURIComponent(mensaje);
      btn.style.display = carrito.length > 0 ? "block" : "none";
    }
  </script>
</body>
</html>